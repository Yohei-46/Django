<!DOCTYPE html>
<html>
<head><title>レース予測実行</title></head>
<body>
<h1>レース予測実行</h1>

{% if error %}
  <p style="color: red;">{{ error }}</p>
{% endif %}

<form method="post">
  {% csrf_token %}
  <label>予測したいレースID:</label>
  <input type="text" name="predict_race_id" value="{{ predict_race_id }}" required><br><br>

  <button type="submit">予測結果を表示</button>
</form>

{% if trifecta_predictions %}
  <h2>3連単予測結果</h2>
  <table border="1">
    <tr><th>組み合わせ</th><th>的中確率</th></tr>
    {% for item in trifecta_predictions %}
    <tr><td>{{ item.combination }}</td><td>{{ item.probability }}</td></tr>
    {% endfor %}
  </table>
{% endif %}

{% if win_predictions %}
  <h2>単勝予測結果</h2>
  <table border="1">
    <tr><th>馬番</th><th>馬名</th><th>勝率予測</th></tr>
    {% for num, name, prob in win_predictions %}
    <tr><td>{{ num }}</td><td>{{ name }}</td><td>{{ prob }}</td></tr>
    {% endfor %}
  </table>
{% endif %}

</body>
</html>
